(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{242:function(e,t,a){Promise.resolve().then(a.bind(a,6178))},6463:function(e,t,a){"use strict";var s=a(1169);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},6178:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),n=a(2265),i=a(6648),r=a(6463),o=a(4041),l=a(4446),c=a(8030);let d=(0,c.Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),u=(0,c.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),h=(0,c.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),m=(0,c.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),x=(0,c.Z)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),g=e=>{let{message:t,type:a}=e;return(0,s.jsx)(o.E.div,{initial:{opacity:0,y:50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:50,x:"-50%"},className:"fixed bottom-4 left-1/2 p-4 rounded-lg shadow-lg ".concat("success"===a?"bg-green-500":"error"===a?"bg-red-500":"bg-blue-500"," text-white z-50"),children:t})},y=()=>(0,s.jsx)("div",{className:"absolute inset-0 -inset-y-1/2 animate-shimmer bg-gradient-to-r from-transparent via-white to-transparent"});function f(){let[e,t]=(0,n.useState)(null),[a,c]=(0,n.useState)(!0),[f,p]=(0,n.useState)(null),[v,b]=(0,n.useState)({isConnected:!1,message:"Waiting for connection..."}),[j,k]=(0,n.useState)(null),w=(0,r.useRouter)(),N=(0,n.useCallback)((e,t)=>{k({message:e,type:t}),setTimeout(()=>k(null),3e3)},[]),C=(0,n.useCallback)(()=>{c(!0),p(null);let e=null;try{(e=new EventSource("".concat("","whatsapp/qr-stream/").concat("1"))).onmessage=a=>{let s=JSON.parse(a.data);console.log(s),"Reconnecting!"===s.qrCode?(b({isConnected:!1,message:"Reconnecting..."}),N("Reconnecting to the server...","info")):"Connected!"===s.qrCode?(b({isConnected:!0,message:"Connected!"}),N("Connected successfully!","success"),null==e||e.close(),setTimeout(()=>w.push("/"),2e3)):s.qrCode.includes("expired")?(p("QR Code Expired!"),N("QR Code Expired! Generating new QR code...","error"),c(!0),e&&e.close(),setTimeout(C,2e3)):(t(s),c(!1))},e.onerror=()=>{console.error("SSE Error"),p("Failed to connect to the server. Please try again."),N("Connection error. Please try again.","error"),null==e||e.close(),c(!1)}}catch(e){console.error("Error setting up SSE:",e),p("Failed to set up connection. Please try again."),N("Failed to set up connection. Please try again.","error"),c(!1)}return()=>{null==e||e.close()}},["",w,N]),E=(0,n.useCallback)(()=>{C()},[C]);return(0,n.useEffect)(()=>C(),[C]),(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-indigo-100 p-4",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"bg-white shadow-2xl rounded-3xl p-8 max-w-md w-full mx-auto overflow-hidden relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-indigo-200 opacity-50"}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-gray-500 via-indigo-500 to-blue-500"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)(o.E.h2,{className:"text-3xl font-extrabold text-center mb-6 text-gray-900 flex items-center justify-center",initial:{y:-20},animate:{y:0},transition:{type:"spring",stiffness:300,damping:20},children:[(0,s.jsx)(d,{className:"w-8 h-8 mr-2 text-gray-600"}),"QR Code Scanner"]}),(0,s.jsx)(l.M,{mode:"wait",children:(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:a?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,s.jsx)(o.E.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,s.jsx)(u,{className:"w-16 h-16 text-gray-600"})}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-800 mt-4",children:"Connecting..."})]}):f?(0,s.jsxs)("div",{className:"text-red-500 text-center",role:"alert",children:[(0,s.jsx)(h,{className:"w-16 h-16 mx-auto mb-4 text-red-500"}),(0,s.jsx)("p",{className:"text-lg font-semibold mb-4",children:f}),(0,s.jsxs)(o.E.button,{onClick:E,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 ease-in-out flex items-center justify-center mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,s.jsx)(m,{className:"w-5 h-5 mr-2"}),"Try Again"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-8 relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-100 rounded-2xl overflow-hidden",children:(0,s.jsx)(y,{})}),(0,s.jsx)(o.E.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:10},children:(0,s.jsx)(i.default,{src:"".concat((null==e?void 0:e.qrCode)||"https://upload.wikimedia.org"),alt:"QR Code",width:250,height:250,className:"mx-auto relative z-10 rounded-2xl shadow-lg"})})]}),(0,s.jsx)("p",{className:"text-center text-lg text-gray-600 mb-6",children:"Scan this QR code to connect"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)(o.E.div,{className:"flex items-center justify-center mb-4 bg-indigo-100 rounded-full py-2 px-4",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:10},children:[(0,s.jsx)(x,{className:"w-5 h-5 mr-2 text-indigo-600"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-indigo-700",children:["Status:",(0,s.jsx)(o.E.span,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"ml-2",children:v.message},v.message)]})]}),(0,s.jsxs)(o.E.button,{onClick:E,className:"bg-gradient-to-r from-gray-600 to-indigo-600 hover:from-gray-700 hover:to-indigo-700 text-white font-bold py-3 px-8 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 ease-in-out flex items-center justify-center mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,s.jsx)(m,{className:"w-5 h-5 mr-2"}),"Refresh"]})]})]})},a?"loading":"content")})]})]}),(0,s.jsx)(l.M,{children:j&&(0,s.jsx)(g,{message:j.message,type:j.type})})]})}}},function(e){e.O(0,[648,430,971,23,744],function(){return e(e.s=242)}),_N_E=e.O()}]);