(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9789:function(e,t,n){Promise.resolve().then(n.bind(n,8212))},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},8212:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(7437),a=n(2265),o=n(6648),r=n(6463);function l(){return(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-3 mt-3",role:"alert",children:[(0,s.jsx)("strong",{className:"font-bold",children:"Relogin Required: "}),(0,s.jsx)("span",{className:"block sm:inline",children:"Please log in again to continue using the bot."})]})}function i(){let[e,t]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),u=(0,r.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let[e,n]=await Promise.all([fetch("".concat("","whatsapp/user/1")),fetch("".concat("","whatsapp/status/1"))]),s=await e.json(),a=await n.json();t({name:s.name,number:s.number,avatar:s.avatar,isLoggedIn:s.isLoggedIn}),i(a.status),console.log(a,s)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}})()},[]);let h=async()=>{try{let e=await fetch("".concat("","whatsapp/logout/1"),{method:"POST"}),t=await e.json();console.log(t.message),u.push("/login")}catch(e){console.error("Error logging out:",e)}},m=async()=>{try{if(null==n?void 0:n.isConnected){let e=await fetch("".concat("","whatsapp/close-connection/1"),{method:"POST"}),t=await e.json();console.log(t.message)}else{let e=await fetch("".concat("","whatsapp/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"1"})}),t=await e.json();setTimeout(()=>{window.location.reload()},1e3),console.log(t.message)}let e=await fetch("".concat("","whatsapp/status/1")),t=await e.json();i(t.status)}catch(e){console.error("Error toggling bot status:",e)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 to-purple-200 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-md w-full",children:[(0,s.jsx)("div",{className:"relative mb-8",children:c?(0,s.jsx)("div",{className:"w-32 h-32 sm:w-48 sm:h-48 mx-auto rounded-full bg-gray-200 animate-pulse"}):(0,s.jsx)("div",{className:"w-32 h-32 sm:w-48 sm:h-48 mx-auto rounded-full overflow-hidden shadow-lg",children:(0,s.jsx)(o.default,{src:(null==e?void 0:e.avatar)||"/placeholder.svg?height=200&width=200",alt:(null==e?void 0:e.name)||"",width:200,height:200,className:"object-cover w-full h-full"})})}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(null==e?void 0:e.isLoggedIn)===0&&(null==n?void 0:n.isConnected)===!1&&(0,s.jsx)(l,{}),c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-8 w-48 mx-auto mb-2 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 w-32 mx-auto mb-4 bg-gray-200 rounded animate-pulse"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:null==e?void 0:e.name}),(0,s.jsxs)("p",{className:"text-base sm:text-lg text-gray-600 mb-4 flex items-center justify-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),null==e?void 0:e.number]})]}),(0,s.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat((null==n?void 0:n.isConnected)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["Bot Status: ",(null==n?void 0:n.isConnected)?"Active":"Inactive"]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,s.jsxs)("button",{className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center",onClick:h,children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]}),(0,s.jsxs)("button",{className:"px-6 py-2 ".concat((null==n?void 0:n.isConnected)?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"," text-white rounded-md transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center"),onClick:m,children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(null==n?void 0:n.isConnected)?"Stop Bot":"Start Bot"]})]})]})})}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=9789)}),_N_E=e.O()}]);